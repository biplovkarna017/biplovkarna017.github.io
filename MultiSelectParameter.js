"use strict";!function(){let e="",n=[],t=[];function a(){tableau.extensions.ui.displayDialogAsync("./Configure.html","",{height:500,width:1e3}).then(a=>{n=JSON.parse(e=tableau.extensions.settings.get("config")),t=[...new Set(n.map(e=>e.sheet))],i()})}function i(){tableau.extensions.dashboardContent.dashboard.worksheets.forEach(e=>{t.includes(e.name)&&e.addEventListener(tableau.TableauEventType.FilterChanged,t=>{t.getFilterAsync().then(t=>{e.getFiltersAsync().then(e=>{let a=e.filter(e=>n.some(n=>n.filter===e.fieldName&&n.allValues||e.fieldName===t.fieldName));a.forEach(e=>{!function e(t){let a=t.worksheetName,i=n.find(e=>e.filter===t.fieldName&&e.sheet===a),l;i&&(t.isAllSelected?i.allValues?t.getDomainAsync(tableau.FilterDomainType.RELEVANT).then(e=>{l=e.values.map(e=>e.value).join("|"),s(i.param,l)}):s(i.param,".*"):(l=0===t.appliedValues.length?"^$":t.appliedValues.map(e=>e.value).join("|"),s(i.param,l)))}(e)})})})})})}function s(e,n){tableau.extensions.dashboardContent.dashboard.getParametersAsync().then(t=>{let a=t.find(n=>n.name===e);a&&a.changeValueAsync(n)})}$(document).ready(function(){tableau.extensions.initializeAsync({configure:a}).then(()=>{(e=tableau.extensions.settings.get("config"))?(n=JSON.parse(e),t=[...new Set(n.map(e=>e.sheet))],i()):a()})})}();
